<launch>
    <arg name='host' default='localhost'/>
    <arg name='port' default='2000'/>
    <arg name="vehicle_filter" default="vehicle.toyota.prius" />
    <arg name="sensor_definition_file" default="$(find autonomous_server)/config/sensors.json"/>
    <arg name="role_name" default="ego_vehicle"/>
    <arg name="rviz_config" default="$(find autonomous_server)/config/rviz_config.rviz"/>
    <arg name="npc_count" default="0"/>

    <include file="$(find carla_ros_bridge)/launch/carla_ros_bridge.launch">
        <arg name='host' value='$(arg host)'/>
        <arg name='port' value='$(arg host)'/> 
    </include>

    <include file="$(find carla_ego_vehicle)/launch/carla_ego_vehicle.launch">  
        <arg name='host' value='$(arg host)'/>
        <arg name='port' value='$(arg port)'/>
        <arg name="vehicle_filter" value='$(arg vehicle_filter)'/>
        <arg name="sensor_definition_file" value='$(arg sensor_definition_file)'/>
        <arg name="role_name" value="$(arg role_name)"/>
  </include>

  <include file="$(find carla_ackermann_control)/launch/carla_ackermann_control.launch" />
  <node type="rviz" name="rviz" pkg="rviz" args="-d $(arg rviz_config)" />

  <node name="vehicle_control" type="vehicle_control.py" pkg="autonomous_server"/>
  <node name="lidar_test" type="lidar_test" pkg="autonomous_server"/>
  <node name="lidar_data_testing" type="lidar_data_testing.py" pkg="autonomous_server"/>

</launch>
